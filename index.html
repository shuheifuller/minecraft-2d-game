# Full HTML with all 3 updates implemented correctly:
# 1. Creeper moves side to side, explodes on contact, and damages player (-2 hearts)
# 2. Pig's feet aligned directly on dirt blocks
# 3. Trees generated on top of dirt blocks using wood and leaves

minecraft_game_with_fixes = """
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>2D Minecraft - Final Fixes</title>
  <style>
    body { margin: 0; background: #a3d9ff; font-family: monospace; }
    #gameContainer { display: flex; flex-direction: column; align-items: center; padding: 10px; }
    canvas { border: 3px solid #333; background: #87ceeb; image-rendering: pixelated; }
    #controller { display: flex; gap: 10px; margin-top: 10px; }
    .ctrl-btn { padding: 10px 20px; background: #444; color: white; border: 2px solid #888;
                font-size: 18px; border-radius: 5px; cursor: pointer; }
    #hearts { margin-bottom: 10px; }
    .heart {
      width: 24px; height: 24px; background: red;
      clip-path: polygon(50% 0%, 100% 35%, 80% 100%, 50% 80%, 20% 100%, 0% 35%);
      display: inline-block; margin-right: 4px;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <div id="hearts"></div>
    <canvas id="gameCanvas" width="600" height="360"></canvas>
    <div id="controller">
      <button class="ctrl-btn" onclick="moveLeft()">Left</button>
      <button class="ctrl-btn" onclick="moveRight()">Right</button>
      <button class="ctrl-btn" onclick="jump()">Up</button>
      <button class="ctrl-btn" onclick="mineBelow()">Mine</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const BLOCK_SIZE = 30;
    const ROWS = 12;
    const COLS = 20;

    const world = Array.from({ length: ROWS }, (_, y) =>
      Array.from({ length: COLS }, (_, x) => (y > 8 ? "dirt" : null))
    );

    // Place trees on top of dirt blocks
    for (let x = 2; x < COLS; x += 4) {
      if (world[8][x] === "dirt") {
        world[7][x] = "wood";
        world[6][x] = "wood";
        for (let dx = -1; dx <= 1; dx++) {
          for (let dy = -1; dy <= 1; dy++) {
            const tx = x + dx;
            const ty = 5 + dy;
            if (tx >= 0 && tx < COLS && ty >= 0 && ty < ROWS) {
              world[ty][tx] = "leaves";
            }
          }
        }
      }
    }

    const pig = { x: 14, y: 7 }; // Just above dirt at y = 8

    const creeper = {
      x: 10,
      y: 7,
      direction: 1,
      exploded: false,
      explosionFrame: 0
    };

    const player = {
      x: 5, y: 6,
      vy: 0,
      width: 1,
      height: 2,
      facing: "right",
      onGround: false,
      health: 5,
      invincible: 0
    };

    function drawBlock(x, y, type) {
      ctx.fillStyle = {
        dirt: "#8b4513",
        wood: "#a0522d",
        leaves: "#228b22"
      }[type] || "gray";
      ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
      ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
    }

    function drawPig() {
      const px = pig.x * BLOCK_SIZE;
      const py = pig.y * BLOCK_SIZE;
      ctx.fillStyle = "#ff69b4";
      ctx.fillRect(px + 2, py + 10, 26, 14); // body
      ctx.fillRect(px + 4, py + 24, 4, 6);   // leg 1
      ctx.fillRect(px + 22, py + 24, 4, 6);  // leg 2
      ctx.fillRect(px, py, 20, 14);          // head
      ctx.fillStyle = "black";
      ctx.fillRect(px + 3, py + 4, 2, 2);    // eyes
      ctx.fillRect(px + 10, py + 4, 2, 2);
      ctx.fillStyle = "#ff1493";
      ctx.fillRect(px + 5, py + 10, 10, 4);  // nose
      ctx.fillStyle = "#ff69b4";
      ctx.fillRect(px + 2, py - 2, 4, 4);    // ears
      ctx.fillRect(px + 14, py - 2, 4, 4);
    }

    function drawCreeper() {
      const px = creeper.x * BLOCK_SIZE;
      const py = creeper.y * BLOCK_SIZE;

      if (creeper.exploded) {
        const r = creeper.explosionFrame * 5;
        ctx.fillStyle = `rgba(255,69,0,${1 - creeper.explosionFrame / 10})`;
        ctx.beginPath();
        ctx.arc(px + BLOCK_SIZE / 2, py + BLOCK_SIZE / 2, r, 0, Math.PI * 2);
        ctx.fill();
        return;
      }

      ctx.fillStyle = "green";
      ctx.fillRect(px + 5, py, 20, 20);       // head
      ctx.fillRect(px + 10, py + 20, 10, 20); // body
      ctx.fillRect(px + 5, py + 40, 5, 5);    // leg L
      ctx.fillRect(px + 20, py + 40, 5, 5);   // leg R
      ctx.fillStyle = "black";
      ctx.fillRect(px + 10, py + 5, 3, 3);    // eye L
      ctx.fillRect(px + 17, py + 5, 3, 3);    // eye R
    }

    function drawPlayer() {
      const px = player.x * BLOCK_SIZE;
      const py = player.y * BLOCK_SIZE;
      ctx.fillStyle = "#4169e1";
      ctx.fillRect(px, py, BLOCK_SIZE, BLOCK_SIZE * 2);
      ctx.fillStyle = "#fdbcb4";
      ctx.fillRect(px + 5, py - 15, 20, 20);
      ctx.fillStyle = "#cccccc";
      if (player.facing === "right") {
        ctx.fillRect(px + BLOCK_SIZE, py + 10, 10, 5);
      } else {
        ctx.fillRect(px - 10, py + 10, 10, 5);
      }
    }

    function drawHearts() {
      const bar = document.getElementById("hearts");
      bar.innerHTML = "";
      for (let i = 0; i < player.health; i++) {
        const heart = document.createElement("div");
        heart.className = "heart";
        bar.appendChild(heart);
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      world.forEach((row, y) => row.forEach((cell, x) => {
        if (cell) drawBlock(x, y, cell);
      }));
      drawPig();
      drawCreeper();
      drawPlayer();
      drawHearts();
    }

    function moveLeft() {
      if (player.x > 0 && !world[Math.floor(player.y)][player.x - 1]) {
        player.x--;
        player.facing = "left";
      }
    }

    function moveRight() {
      if (player.x + player.width < COLS && !world[Math.floor(player.y)][player.x + 1]) {
        player.x++;
        player.facing = "right";
      }
    }

    function mineBelow() {
      const y = Math.floor(player.y + player.height);
      if (y < ROWS && world[y][player.x]) {
        world[y][player.x] = null;
      }
    }

    function jump() {
      if (player.onGround) {
        player.vy = -0.4;
        player.onGround = false;
      }
    }

    function applyGravity() {
      player.vy += 0.02;
      player.y += player.vy;
      const below = Math.floor(player.y + player.height);
      if (below >= ROWS || world[below]?.[player.x]) {
        player.y = Math.floor(player.y);
        player.vy = 0;
        player.onGround = true;
      }
    }

    function updateCreeper() {
      if (creeper.exploded) {
        creeper.explosionFrame++;
        return;
      }

      const nextX = creeper.x + creeper.direction;
      if (nextX >= 0 && nextX < COLS && !world[creeper.y][nextX]) {
        creeper.x = nextX;
      } else {
        creeper.direction *= -1;
      }

      const touching = Math.abs(creeper.x - player.x) < 1 &&
                       Math.abs(creeper.y - player.y) < 1;
      if (touching && player.invincible <= 0) {
        creeper.exploded = true;
        player.health = Math.max(0, player.health - 2);
        player.invincible = 100;
      }
    }

    function loop() {
      applyGravity();
      updateCreeper();
      if (player.invincible > 0) player.invincible--;
      draw();
      requestAnimationFrame(loop);
    }

    draw();
    loop();
  </script>
</body>
</html>
"""

HTML(minecraft_game_with_fixes)
